<f:layout name="default" />

<f:section name="content">
	<div class="edit">
		<f:if condition="{reference}">
			<f:then>
				<f:if condition="{administrator} == {reference.agency.administrator}">
					<f:then>
						<h1><f:translate key="aNewProject">Edit/Create Project</f:translate></h1>
						
						<f:render partial="formErrors" arguments="{for: 'reference'}" />
						
						<f:form method="post" controller="Reference" action="update" name="reference" object="{reference}" enctype="multipart/form-data">
							<h2>Project Information</h2>
							<div class="b-form b-form-edit">
								<div class="b-form-row">
									<label for="form-headline"><f:translate key="headline">Headline</f:translate></label>
									<div class="b-form-inputs">
										<f:form.textfield property="title" id="form-headline" />
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-about-project"><f:translate key="aboutProject">About the project</f:translate></label>
									<div class="b-form-inputs">
										<f:form.textarea cols="20" rows="5" property="description" id="form-about-project" />
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
		
								<div class="b-form-row">
									<f:if condition="{reference.screenshot}">
										<f:then>
											<label for="screenshot"><f:translate key="screenshot">Screenshot</f:translate>: <f:image src="{uploadPath}/{reference.screenshot}" alt="" maxHeight="24"/>
											<f:link.action controller="Reference" action="edit" arguments="{reference : reference, screenshot : 1}" ><f:translate key="remove">remove</f:translate></f:link.action><br/>
										</f:then>
										<f:else>
											<label for="form-about-project">Upload main screen</label>
											<div class="b-form-inputs">
												<div class="b-form-file">
													<agency:form.upload property="screenshot" maxlength="1" class="multi-file"/>
													<span class="form-file-main-text">Choose file</span> <span class="form-file-secondary-text">Limits: jpg/png, 600x480px, 500KB</span>
												</div><!-- .b-form-file -->
											</div><!-- b-form-inputs -->
										</f:else>
									</f:if>
								</div><!-- b-form-row -->
		
								<div class="b-form-row">
									<f:for each="{galleryImages}" as="image">
										<f:image src="{uploadPath}/{image}" alt="" maxHeight="24"/>
										<f:link.action controller="Reference" action="edit" arguments="{reference : reference, screenshot : image}" ><f:translate key="remove">remove</f:translate></f:link.action><br/>
									</f:for>
									<label for="form-about-project">Upload other screens</label>
									<div class="b-form-inputs">
										<div class="b-form-file">
											<input type="file" maxlength="3" class="multi-file" name="tx_typo3agencies_pi1[reference][screenshotGallery][]"/>
											<span class="form-file-main-text">Choose file</span> <span class="form-file-secondary-text">Limits: jpg/png, 600x480px, 500KB</span>
										</div><!-- .b-form-file -->
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
		
								<div class="b-form-row">
									<label for="form-link"><f:translate key="link">Link</f:translate></label>
									<div class="b-form-inputs">
										<f:form.textfield property="link" id="form-link"/>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-pages"><f:translate key="pages">Number of pages</f:translate></label>
									<div class="b-form-inputs">
										<f:form.select property="pages" value="{pages}" options="{pagesList}" id="form-pages"></f:form.select>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-languages"><f:translate key="languages">Number of languages</f:translate></label>
									<div class="b-form-inputs">
										<f:form.select property="languages" value="languages" options="{languagesList}" id="form-languages"></f:form.select>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-category"><f:translate key="category">Category</f:translate></label>
									<div class="b-form-inputs">
										<f:form.select property="category" value="{category}" options="{categories}" id="form-category"></f:form.select>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-industry"><f:translate key="industry">Industry</f:translate></label>
									<div class="b-form-inputs">
										<div class="b-form-sub-row sub-two-columns">
											<div class="b-form-sub-column">
												<f:form.select property="industry" value="{industry}" options="{industries}" id="form-industry"></f:form.select>
											</div><!-- .b-form-sub-column -->
											<div class="b-form-sub-column">
												<label for="form-other"><f:translate key="other">other</f:translate></label>
												<div class="b-form-row">
													<f:form.textfield property="industryOther" id="form-other"/>
												</div><!-- .b-form-row -->
											</div><!-- .b-form-sub-column -->
										</div><!-- .b-form-sub-row sub-two-columns -->
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-tags"><f:translate key="tags">Tags</f:translate></label>
									<div class="b-form-inputs">
										<f:form.textfield property="tags" id="form-tags"/>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
							</div><!-- b-form -->


							<h2>Company Information</h2>
					
							<div class="b-form b-form-edit">
								<div class="b-form-row">
									<label for="form-about-company"><f:translate key="aboutCompany">About the company</f:translate></label>
									<div class="b-form-inputs">
										<f:form.textarea cols="20" rows="5" property="about" id="form-about-company" />
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
								<div class="b-form-row">
									<label for="form-company-size"><f:translate key="size">Company size</f:translate></label>
									<div class="b-form-inputs">
										<f:form.select property="size" value="{size}" options="{companySizes}" id="form-company-size"></f:form.select>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->						
								<div class="b-form-row">
									<label for="form-country"><f:translate key="country">Country</f:translate></label>
									<div class="b-form-inputs">
										<f:form.select property="country" value="{country}" options="{countries}" id="form-country"></f:form.select>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->						
								<div class="b-form-row">
									<div class="b-form-inputs">
										<f:form.submit class="bu bu-confirm" value="Preview" name="preview"/>
										<f:form.submit class="bu bu-confirm" value="Submit" />
										<button class="bu bu-secondary" onclick="javascript:history.back()">Cancel</button>
									</div><!-- b-form-inputs -->
								</div><!-- b-form-row -->
							</div><!-- b-form -->
						</f:form>
					</f:then>
					<f:else>
						<f:translate key="notAllowed">You are not allowed to perform this action!</f:translate>
					</f:else>
				</f:if>
			</f:then>
			<f:else>
				<f:translate key="noReference">No reference key!</f:translate>
			</f:else>
		</f:if>
	</div>
</f:section>
