<f:layout name="default" />
<f:section name="content">
	<div class="cl">
		<div class="s-sidebar">
			<div class="b-box">
				<h3>Filter Options</h3>
				<f:form method="post" controller="Reference" action="index" name="filter" object="{filter}" >
					<p class="form-row"><f:form.select property="category" value="{filter.category}" options="{categories}"></f:form.select></p>
					<p class="form-row"><f:form.select property="industry" value="{filter.industry}" options="{industries}"></f:form.select></p>
					<p class="form-row"><f:form.select property="companySize" value="{filter.companySize}" options="{companySizes}"></f:form.select></p>
					<p><f:form.submit class="bu bu-mini" value="Submit"/></p>
				</f:form>
			</div><!-- b-box -->
		</div><!-- s-sidebar -->
		
		<div class="s-body">
			<p class="b-project-add">
				<f:link.action action="new" controller="Reference"	arguments="{reference : reference}">
					<f:translate key="newProject">Add your project</f:translate>
				</f:link.action>
			</p>
			<h1>Case Studies</h1>

			<div class="b-projects-list">
				<f:for each="{references}" as="reference">
					<f:render partial="reference" arguments="{reference: reference, administrator : administrator, uploadPath : uploadPath, controller : 'Reference', redirectController : redirectController, redirect : redirect}" />
				</f:for>
			</div><!-- b-projects-list -->
			
			
			<f:if condition="{pager.displayItems}">
				<ul class="b-pager">
					<f:if condition="{pager.page} != 1">
						<f:then>
							<li><f:link.action controller="Reference" action="index" arguments="{reference : reference, page : 1}"><f:translate key="first">First</f:translate></f:link.action></li>
							<li><f:link.action controller="Reference" action="index" arguments="{reference : reference, page : pager.previousPage}"><f:translate key="previous">Previous</f:translate></f:link.action></li>
						</f:then>
						<f:else>
							<li class="cur"><f:translate key="first">First</f:translate></li>
						</f:else>
					</f:if>
			</f:if>
			<f:for each="{pager.displayItems}" as="pageItem">
				<f:if condition="{pageItem.key} == {pager.page}">
					<f:then>
						<li class="cur">{pageItem.value}</li>
					</f:then>
					<f:else>
						<li><f:link.action controller="Reference" action="index" arguments="{reference : reference, page : pageItem.key}">{pageItem.value}</f:link.action></li>
					</f:else>
				</f:if>
			</f:for>
			<f:if condition="{pager.displayItems}">
				<f:if condition="{pager.page} != {pager.LastPage}">
					<f:then>
						<li><f:link.action controller="Reference" action="index" arguments="{reference : reference, page : pager.nextPage}"><f:translate key="next">Next</f:translate></f:link.action></li>
						<li><f:link.action controller="Reference" action="index" arguments="{reference : reference, page : pager.lastPage}"><f:translate key="last">Last</f:translate></f:link.action></li>
					</f:then>
					<f:else>
						<li class="cur"><f:translate key="last">Last</f:translate></li>
					</f:else>
				</f:if>
				</ul>
			</f:if>
		</div><!-- s-body -->
	</div><!-- cl -->
</f:section>
